/* ======================================================
   FALLTEM ‚Äî Completa la palabra ‚Äî CSS limpio v1.5
   - Claro por defecto, dark opcional con [data-theme="dark"]
   - Misma l√≥gica visual que el resto de juegos
   ====================================================== */

/* ===== Tokens ===== */
:root{
  color-scheme: light dark;
  --fs-base: clamp(18px, 1.2vw + 14px, 22px);
  --space: clamp(12px, 1vw + 8px, 18px);
  --font: "Montserrat", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;

  /* Superficies */
  --bg:#f8fbf4; --fg:#1b1b1b; --muted:#50380b;
  --card:#ffffff; --border:#e5e7eb;

  /* Marca */
  --accent:#99cd68;     /* verde */
  --accent-2:#5fcbe0;   /* celeste */

  /* Botones */
  --btn-primary-bg: var(--accent);   --btn-primary-fg:#08340f;
  --btn-sec-bg:     var(--accent-2); --btn-sec-fg:#072a32;

  /* Estado/feedback */
  --ok:#16a34a;  --bad:#dc2626;

  /* Accesibilidad */
  --focus: var(--accent-2);
}
[data-theme="dark"]{
  --bg:#0b0b0b; --fg:#f5f5f5; --muted:#cfcfcf;
  --card:#171717; --border:#2a2a2a;

  --btn-primary-bg: var(--accent);   --btn-primary-fg:#0a0a0a;
  --btn-sec-bg:     var(--accent-2); --btn-sec-fg:#0a0a0a;
}

/* ===== Base ===== */
*{ box-sizing:border-box }
html,body{ height:100% }
html{ -webkit-text-size-adjust:100%; text-size-adjust:100% }
body{
  margin:0; background:var(--bg); color:var(--fg);
  font-family:var(--font); font-size:var(--fs-base); line-height:1.7; letter-spacing:.15px;
  -webkit-tap-highlight-color: transparent;
}
.wrap{
  max-width: 1000px;
  width: min(1000px, calc(100% - 2*var(--space)));
  margin: 0 auto; padding: var(--space);
}
.header h1{ font-size: clamp(1.9rem, 1.7vw + 1rem, 2.4rem); margin:.5rem 0; font-weight:900 }
.intro{ margin:0 0 var(--space) }

/* Tarjeta base */
.card{
  background:var(--card); border:1px solid var(--border);
  border-radius:16px; padding:var(--space);
  box-shadow:0 2px 10px rgba(0,0,0,.08);
}

/* ===== Controles ===== */
.controles{
  display:grid; gap:1rem; align-items:end;
  grid-template-columns: 1fr 1fr;
}
.controles .control{ display:grid; gap:.5rem }
label{ display:block; font-weight:800; opacity:.98 }
select{
  appearance:none; width:100%;
  background:var(--card); color:var(--fg); border:1px solid var(--border);
  padding:.85rem 1rem; border-radius:.8rem; font-size:1.05rem;
  background-image:url("data:image/svg+xml;utf8,<svg fill='currentColor' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'><path d='M5.5 7l4.5 5 4.5-5z'/></svg>");
  background-repeat:no-repeat; background-position:right 1rem center; background-size:1rem; padding-right:2.4rem;
}
select:focus-visible{ outline:3px solid var(--focus); outline-offset:3px; border-color:var(--focus) }

/* Grupo de botones dentro de controles */
.controles .buttons{
  grid-column: 1 / -1;               /* ocupa el ancho completo */
  display:flex; gap:.8rem; flex-wrap:wrap; justify-content:center;
}

/* Botones */
.btn{
  border:0; border-radius:16px; cursor:pointer; font-weight:800;
  padding:1rem 1.2rem; min-height:52px; font-size:1.05rem;
  transition: transform .08s ease, filter .15s ease, background-color .15s ease, color .15s ease;
}
.btn:hover{ transform: translateY(-1px); filter: brightness(1.04) }
.btn:focus-visible{ outline:3px solid var(--focus); outline-offset:3px }
.btn.principal{  background:var(--btn-primary-bg); color:var(--btn-primary-fg) }
.btn.secundario{ background:var(--btn-sec-bg);   color:var(--btn-sec-fg) }

#btnComenzar{ width: clamp(260px, 60vw, 560px) }
#btnReiniciar{ width: clamp(260px, 60vw, 560px) }

/* Bot√≥n de pista */
#btnPista{
  margin: .6rem auto clamp(1rem, 1.2vw + .6rem, 1.6rem) auto;
  width: clamp(220px, 60%, 360px);
  display: block;
}

/* Botonera de cierre centrada y consistente */
.acciones{
  margin-top: 1rem;
  display: flex;
  flex-direction: column;
  gap: .65rem;
  align-items: center;
}
.acciones .btn{
  width: clamp(260px, 60vw, 560px);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  text-decoration: none;   /* evita subrayado si el bot√≥n es <a> */
}

/* Por si tu tema general no lo cubre para todos los .btn en forma de <a> */
a.btn { text-decoration: none; }

/* ===== Juego ===== */
.juego{ display:grid; gap:.9rem; margin-top: var(--space) }

/* Progreso */
.progresoBar{ height:10px; background:var(--border); border-radius:999px; overflow:hidden }
#pbFill{ height:100%; width:0%; background:var(--btn-primary-bg); transition: width .2s linear }

/* Timer */
.timer-text{ margin:.2rem 0; font-weight:800 }
.timerBar{
  height:10px; border-radius:999px;
  background: color-mix(in oklab, var(--border) 80%, transparent);
  overflow:hidden;
}
#timerFill{
  height:100%; width:0%;
  background: var(--accent);
  transition: width .1s linear, background-color .15s ease;
}

/* Enunciado + hueco */
.enunciado{ font-weight:800; margin:.2rem 0 .6rem }
.hueco{
  font-weight:900; letter-spacing:.04em;
  font-size: clamp(1.6rem, 1.2vw + 1.2rem, 2rem);
  padding:.6rem .8rem; border-radius:.8rem; border:1px dashed var(--border);
  background: color-mix(in oklab, var(--card) 90%, transparent);
  text-align:center;
}

/* Opciones */
.opciones{
  display:grid; gap:1rem; grid-template-columns:1fr;
}
@media (min-width:680px){ .opciones{ grid-template-columns:1fr 1fr } }

.opcion-btn{
  text-align:left; background:var(--card); color:var(--fg);
  border:2px solid var(--border); border-radius:16px;
  padding:1rem 1.1rem; font-weight:800;
  font-size: clamp(1.05rem, .6vw + 1rem, 1.25rem);
  cursor:pointer; box-shadow:0 2px 6px rgba(0,0,0,.08);
  transition: transform .15s ease, filter .15s ease, border-color .15s ease, box-shadow .15s ease, background-color .15s ease;
}
.opcion-btn strong{ margin-right:.4rem }
.opcion-btn:hover,
.opcion-btn:focus-visible{
  filter:brightness(1.06); transform:translateY(-1px);
  outline:3px solid var(--focus); outline-offset:2px;
}

/* Estados de respuesta */
.opcion-btn.ok{
  border-color:var(--ok);
  box-shadow:0 0 0 3px color-mix(in oklab, var(--ok) 35%, transparent);
  background: color-mix(in oklab, var(--ok) 14%, var(--card));
}
.opcion-btn.bad{
  border-color:var(--bad);
  box-shadow:0 0 0 3px color-mix(in oklab, var(--bad) 35%, transparent);
  background: color-mix(in oklab, var(--bad) 10%, var(--card));
}

/* Pista */
.pista[hidden]{ display:none !important }
.pista:empty{ display:none }
.pista:not([hidden]){
  display:block;
  background: color-mix(in oklab, var(--accent-2) 18%, transparent);
  border: 1px solid color-mix(in oklab, var(--accent-2) 55%, transparent);
  color:#072a32;
  padding:.7rem .9rem; border-radius:12px; margin:.2rem 0 .8rem; font-weight:700;
}
.pista:not([hidden]):not(:empty)::before{ content:"üí° "; font-weight:900; margin-right:.25rem }
[data-theme="dark"] .pista:not([hidden]){
  color:#eaf9ff;
  background: color-mix(in oklab, var(--accent-2) 26%, transparent);
  border-color: color-mix(in oklab, var(--accent-2) 70%, transparent);
}

/* Feedback + HUD */
.feedback{ margin:.6rem 0 0; font-weight:800 }
.feedback.ok{ color:var(--ok) } .feedback.bad{ color:var(--bad) }
.estado{ margin-top:1rem } .estado p{ margin:.2rem 0 }
.muted{ color:var(--muted) }

/* ===== Pantalla final centrada ===== */
#juego .tarjeta{
  width: min(760px, 100% - 2rem);
  margin: 1rem auto;
  background: var(--card); border:1px solid var(--border); border-radius:16px; padding: var(--space);
  box-shadow:0 2px 10px rgba(0,0,0,.08);
}
#juego .tarjeta .pregunta,
#juego .tarjeta > p{ text-align:center }
#juego .tarjeta .acciones{
  display:flex; flex-direction:column; gap:.65rem; align-items:center; margin-top:1rem;
}
#juego .tarjeta .acciones .btn{ width: min(560px, 100%) }
a.btn{ text-decoration:none } /* evita subrayado en link-bot√≥n */

/* ===== FABs (¬ø? y tema) ‚Äî misma l√≥gica que otros juegos ===== */
.fab-stack{
  position:fixed; right:max(12px, env(safe-area-inset-right,0)); top:max(12px, env(safe-area-inset-top,0));
  display:grid; gap:12px; z-index:20;
}
.fab{
  width:58px; height:58px; border-radius:50%; border:0; cursor:pointer;
  display:grid; place-items:center; font-weight:900; font-size:1.25rem;
  box-shadow:0 6px 22px rgba(0,0,0,.18), 0 2px 8px rgba(0,0,0,.10);
  transition: transform .08s ease, filter .15s ease, background-color .15s ease, color .15s ease;
}
.fab:hover{ transform:translateY(-1px); filter:brightness(1.04) }
.fab:focus-visible{ outline:3px solid var(--focus); outline-offset:3px }

/* Claro: ambos oscuros */
[data-theme="light"] .fab--help,
[data-theme="light"] .fab--theme {
  background: #1f2733; 
  color:#fff;
}

/* Oscuro: ambos celestes */
[data-theme="dark"] .fab--help,
[data-theme="dark"] .fab--theme {
  background: var(--accent-2); 
  color:#0a0a0a;
}

/* ===== Modal ===== */
.modal{ display:none; position:fixed; inset:0; background:rgba(0,0,0,.6); z-index:30 }
.modal[aria-hidden="false"]{ display:block }
.modal-card{
  max-width:min(820px, 100% - 2*var(--space));
  max-height:min(86vh, 100% - 2*var(--space));
  margin:6vh auto; background:var(--card); color:var(--fg);
  padding:var(--space); border-radius:16px; border:1px solid var(--border);
  box-shadow:0 4px 14px rgba(0,0,0,.15);
  overflow:auto; /* scrolleable en m√≥viles */
}
.mt0{ margin-top:0 }
.modal-actions{ display:flex; gap:.6rem; justify-content:flex-end }

/* ===== Skip link / Footer ===== */
.skip{ position:absolute; left:-9999px; top:auto }
.skip:focus{
  left:12px; top:12px; background:var(--btn-primary-bg); color:var(--btn-primary-fg);
  padding:8px 10px; border-radius:8px; z-index:1000;
}
.mini-credit{
  margin-top:.8rem; padding:.6rem 0; border-top:1px solid var(--border);
  font-size:.85em; line-height:1.35; color:var(--muted);
}
.mini-credit a{ color:inherit; font-weight:700; text-decoration:underline }
.mini-label{ font-weight:900; color:var(--fg) }

/* ===== Responsivo / Reduce motion ===== */
@media (max-width:600px){
  .opciones{ gap:1rem }
  .enunciado{ margin-bottom:1rem }
}
@media (prefers-reduced-motion: reduce){
  *{ transition:none !important; animation:none !important; scroll-behavior:auto !important }
}

/* ===== Fallback color-mix ===== */
@supports not (color: color-mix(in oklab, red 50%, white)){
  .opcion-btn.ok{ background:#eaf7e9 }
  .opcion-btn.bad{ background:#feecec }
  .pista{ background:#e6f7fc; border:1px solid #b3e6f6; color:#072a32 }
  [data-theme="dark"] .pista{ background:#1c2c33; border-color:#276b80; color:#eaf9ff }
}

/* Referencias del modal */
.refs{
  margin:.2rem 0 1rem;
  padding-left:1.2rem;
  font-size:.95em;
  color: var(--muted);
}
.refs li{ margin-bottom:.35rem }
.refs a{
  color: inherit;
  font-weight: 800;
  text-decoration: underline;
}
